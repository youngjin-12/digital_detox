<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ë””ì§€í„¸ ë””í†¡ìŠ¤ ë°ëª¨</title>
    <style>
      :root {
  --bg: #181a1f; /* ì „ì²´ ë°°ê²½: ì§„í•œ íšŒìƒ‰ */
  --fg: #f6f7fa;
  --accent: #ffb347;
  --accent-soft: rgba(255, 179, 71, 0.18);

  /* í…Œë§ˆ ì¹´ë“œ ìƒ‰ íŒ”ë ˆíŠ¸ */
  --card-bg: #aab2bd; /* ê¸°ë³¸ í…Œë§ˆ ìƒì ìƒ‰ */
  --card-bg-soft: #ccd1d9; /* hover ì‹œ */
  --card-bg-muted: #8f97a3; /* active ì‹œ(ì‚´ì§ ë” ì§„í•˜ê²Œ) */

  --border: rgba(255, 255, 255, 0.08);
}

body {
  /* ë„¤ì´ë¹„ ëŠë‚Œ ë¹¼ê³ , íšŒìƒ‰ ê³„ì—´ ê·¸ë¼ë””ì–¸íŠ¸ */
  background: radial-gradient(circle at top, #30333a 0, var(--bg) 55%);
  color: var(--fg);
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
    sans-serif;
  min-height: 100vh;
}

.app {
  max-width: 1580px;
  margin: 18px auto 26px;
  padding: 0 16px;
}

/* ìƒë‹¨ ë°” */
.topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 12px;
}

.top-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.digital-clock {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.4);
  font-family: ui-monospace;
  font-size: 0.9rem;
}

.title-block h1 {
  font-size: 1.2rem;
  margin-bottom: 2px;
}

.title-block p {
  font-size: 0.82rem;
  opacity: 0.75;
}

/* ë©”ì¸ ë ˆì´ì•„ì›ƒ */
.main-layout {
  display: grid;
  grid-template-columns: minmax(0, 2.4fr) 260px; /* â† ì™¼ìª½ ë” ë„“ê²Œ, ì˜¤ë¥¸ìª½ ì•½ê°„ ì¢ê²Œ */
  gap: 18px;
  margin-bottom: 0;
  padding-bottom: 40px;
}

.panel {
  margin-bottom: 0;
  padding-bottom: 20px;
}

/* ì¤‘ì•™ ì¥ë©´ ì˜ì—­ */
.scene-title {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 1rem;
  margin-bottom: 4px;
}

.scene-subtitle {
  font-size: 0.85rem;
  opacity: 0.78;
  margin-bottom: 8px;
}

.scene-canvas {
  width: 100%;
  height: calc(100vh - 240px);
  border-radius: 22px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  transition: background 0.8s ease;
}

/* ì˜¤ë¥¸ìª½ ì»¨íŠ¸ë¡¤ */
.control-panel {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.control-card {
  border-radius: 14px;
  border: 1px solid var(--border);
  padding: 10px 10px 12px;
  background: rgba(0, 0, 0, 0.25);
}

.control-card h2 {
  font-size: 0.95rem;
  margin-bottom: 4px;
}

.label {
  font-size: 0.8rem;
  opacity: 0.8;
  margin-bottom: 6px;
}

.timer-inputs {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  margin-bottom: 4px;
}

.timer-inputs input {
  width: 52px;
  padding: 4px 6px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.35);
  color: var(--fg);
  text-align: center;
}

.time-display {
  font-family: ui-monospace;
  font-size: 1.6rem;
  text-align: center;
  margin-bottom: 6px;
}

.controls {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
}

.control-btn {
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--fg);
  font-size: 0.82rem;
  cursor: pointer;
}

.control-btn.primary {
  border-color: var(--accent);
  background: var(--accent-soft);
}

/* íƒ€ì´ë¨¸ ì‹œì‘ ë²„íŠ¼ì€ ë…¸ë€ìƒ‰(í”„ë¼ì´ë¨¸ë¦¬) ë¹¼ê³  ì¼ë°˜ ë²„íŠ¼ ìŠ¤íƒ€ì¼ë¡œ */
#timerStartBtn {
  border-color: var(--border);
  background: rgba(255, 255, 255, 0.03);
}

/* í˜¸ë²„ íš¨ê³¼ë„ ë‹¤ë¥¸ ë²„íŠ¼ì´ë‘ ë¹„ìŠ·í•˜ê²Œ */
#timerStartBtn:hover {
  background: rgba(255, 255, 255, 0.06);
}

.full-width {
  width: 100%;
}

.sound-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.sound-btn.active {
  border-color: var(--accent);
  background: var(--accent-soft);
}

.lock-status {
  margin-top: 6px;
  font-size: 0.8rem;
  opacity: 0.85;
}

/* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìë™ìœ¼ë¡œ íŠ€ì–´ë‚˜ì˜´ */
.floating-sidebar-left:hover {
  transform: translateX(0);
}

.sidebar-grip {
  width: 32px;
  height: 32px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.16);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: #c5c5c5;
  margin-bottom: 12px;
  background: rgba(0, 0, 0, 0.4);
}

.side-theme-btn {
  width: 44px;
  height: 44px;
  border-radius: 16px;
  border: none;
  background: rgba(255, 255, 255, 0.06);
  color: #ffffff;
  cursor: pointer;
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, box-shadow 0.2s, transform 0.2s;
}

.side-theme-btn:hover {
  background: rgba(255, 255, 255, 0.16);
  transform: translateY(-2px);
}

.side-theme-btn.active {
  background: rgba(255, 179, 71, 0.22);
  box-shadow: 0 0 0 2px rgba(255, 179, 71, 0.85);
}

/* ===== ë””í†¡ìŠ¤ ì„¸ì…˜ ëª¨ë‹¬ ===== */

.detox-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.75);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease;
}

/* ë³´ì—¬ì¤„ ë•Œ ë¶™ì¼ í´ë˜ìŠ¤ */
.detox-overlay.show {
  opacity: 1;
  pointer-events: auto;
}

.detox-dialog {
  width: min(420px, 90vw);
  padding: 24px 20px 22px;
  border-radius: 24px;
  border: 1px solid rgba(255, 255, 255, 0.25);
  background: radial-gradient(circle at top, #262633 0, #090910 70%);
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.6);
  text-align: center;
  color: #fdfdfd;
}

.detox-title {
  font-size: 1.1rem;
  margin-bottom: 16px;
}

.detox-time {
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    "Liberation Mono", "Courier New", monospace;
  font-size: 2.6rem;
  letter-spacing: 0.25em;
  margin-bottom: 16px;
}

.detox-text {
  font-size: 0.9rem;
  line-height: 1.5;
  opacity: 0.9;
  margin-bottom: 18px;
}

.detox-end-btn {
  width: 100%;
  justify-content: center;
}

.title-block {
  display: flex;
  align-items: center;
}

/* ë¡œê³  + í…ìŠ¤íŠ¸ë¥¼ ê°ì‹¸ëŠ” ì•Œì•½ ëª¨ì–‘ ë°°ì§€ */
.brand-pill {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 6px 14px;
  border-radius: 999px;
  background: rgba(0, 0, 0, 0.45);
  border: 1px solid rgba(255, 255, 255, 0.14);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.45);
}

/* ì›Œë„ˆì› ë¡œê³  ìŠ¤íƒ€ì¼ */
.logo-img {
  height: 26px; /* ë„ˆë¬´ í¬ë©´ 22pxë¡œ ì¤„ì—¬ë´ë„ ë¨ */
  width: auto;
  display: block;
  border-radius: 6px; /* ì‚´ì§ ë‘¥ê¸€ë¦¬ê¸° */
  object-fit: contain;
}

/* í…ìŠ¤íŠ¸ ìª½ */
.brand-text {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.brand-title {
  font-size: 0.9rem;
  font-weight: 600;
}

.brand-sub {
  font-size: 0.75rem;
  opacity: 0.75;
}

/* ===== ì•„ë˜ í…Œë§ˆ ìŠ¤íŠ¸ë¦½ ===== */
.theme-strip {
  margin-top: 8px;
  padding: 10px 18px;
  border-radius: 18px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  align-items: center;
  gap: 12px;
}

.theme-window {
  flex: 1;
  display: flex;
  justify-content: center;
  gap: 10px;
}

.theme-chip {
  min-width: 110px;
  padding: 8px 14px;
  border-radius: 14px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  color: var(--fg);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  font-size: 0.85rem;
  cursor: pointer;
  transition: background 0.15s ease, border 0.15s ease, transform 0.08s ease;
}

.theme-chip .emoji {
  font-size: 1.1rem;
}

.theme-chip.active {
  border-color: var(--accent);
  background: var(--accent-soft);
  box-shadow: 0 0 0 1px rgba(255, 179, 71, 0.6);
  transform: translateY(-1px);
}

.theme-chip:hover {
  background: rgba(255, 255, 255, 0.06);
}

/* ì¢Œìš° ë„¤ë¹„ ë²„íŠ¼ */
.theme-nav-btn {
  padding-inline: 12px;
  white-space: nowrap;
}

/* ===== ê³µí†µ í˜ì´ì§€ í† ê¸€ ===== */
.page {
  display: none;
}

.page.active {
  display: block;
}

/* ===== í˜ì´ì§€ 1 : í…Œë§ˆ ì„ íƒ ===== */
.page-select {
  margin-top: 24px;
}
/* --- ì²« í˜ì´ì§€ ë¡œê³  ì˜ì—­ --- */

.select-hero {
  margin: 36px auto 28px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 18px;
}

/* ì¤‘ì•™ ë¡œê³  ì¹´ë“œ */
/* --- ì²« í˜ì´ì§€ ë¡œê³  ì˜ì—­ ì‹¬í”Œí•˜ê²Œ ë¦¬ë””ìì¸ --- */

/* ë¡œê³  ìœ„ì¹˜ëŠ” ê·¸ëŒ€ë¡œ ì¤‘ì•™ì— */
.select-hero {
  margin: 40px auto 32px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 16px;
}

/* âœ… ë„¤ëª¨ ì¹´ë“œ ì œê±°: ë°°ê²½Â·ë³´ë”Â·ë°•ìŠ¤ì‰ë„ìš° ì „ë¶€ ì—†ì• ê¸° */
.team-logo {
  position: relative;
  padding: 0; /* ì•ˆìª½ ì—¬ë°± ì œê±° */
  border-radius: 0;
  background: none;
  border: none;
  box-shadow: none;
}

/* âœ… ë¡œê³ ë§Œ ë³´ì´ë„ë¡ + ì–´ë‘ìš´ ë°°ê²½ì— ì–´ìš¸ë¦¬ê²Œ ìƒ‰/ê´‘ ì¶”ê°€ */
.team-logo-img {
  display: block;
  width: 220px; /* í¬ê¸° ì ë‹¹íˆ, í•„ìš”í•˜ë©´ 200~260 ì‚¬ì´ë¡œ ì¡°ì ˆ */
  height: auto;
  object-fit: contain;
  /* ê²€ì • ë¡œê³ ë¼ë©´: í°ìƒ‰ì²˜ëŸ¼ ë³´ì´ê²Œ ë°˜ì „ + ì‚´ì§ ë°ê²Œ */
  filter: invert(1) brightness(1.1) drop-shadow(0 12px 28px rgba(0, 0, 0, 0.7));
}

/* âœ… ì•„ì£¼ ì€ì€í•œ ë¹›ë§Œ ë’¤ì— ê¹”ê¸° (ì¹´ë“œì²˜ëŸ¼ ë³´ì´ì§€ ì•Šê²Œ) */
.team-logo-glow {
  position: absolute;
  inset: -40px;
  background: radial-gradient(
    circle at center,
    rgba(255, 255, 255, 0.16),
    transparent 70%
  );
  opacity: 0.6;
  filter: blur(32px);
  z-index: -1;
}

/* ë¡œê³  ì•„ë˜ ì•ˆë‚´ ë¬¸êµ¬ */
.select-sub {
  font-size: 0.9rem;
  opacity: 0.8;
  letter-spacing: 0.04em;
}

.select-grid-wrapper {
  margin-top: 18px;
  padding: 10px 18px 20px;
  border-radius: 22px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: radial-gradient(
    circle at top,
    rgba(255, 255, 255, 0.05) 0,
    rgba(0, 0, 0, 0.6) 55%
  );
  display: flex;
  align-items: center;
  gap: 14px;
}

.select-grid {
  flex: 1;
  display: flex;
  justify-content: center;
  gap: 16px;

  /* ğŸ‘‡ ì¢Œìš° ì´ë™ ì• ë‹ˆë©”ì´ì…˜ */
  transition: transform 0.45s cubic-bezier(0.22, 0.61, 0.36, 1);
  will-change: transform;
}

.select-card {
  --lift: 80px;
  width: 26%;
  min-width: 220px;
  height: 260px;
  border-radius: 22px;
  border: 1px solid var(--card-bg-soft);
  background: var(--card-bg); /* ğŸ‘‰ #AAB2BD */
  color: #131721; /* íšŒìƒ‰ ë°•ìŠ¤ ìœ„ì— ì–´ë‘ìš´ ê¸€ì */
  padding: 18px 16px;
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  gap: 10px;
  cursor: pointer;
  box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45);
  transition: transform 0.18s ease-out, box-shadow 0.18s ease-out,
    background 0.16s ease-out, border 0.16s ease-out;
  text-align: left;
}

.select-card:hover {
  transform: translateY(calc(-1 * var(--lift)));
  box-shadow: 0 35px 55px rgba(0, 0, 0, 0.85);
  background: var(--card-bg-soft); /* #CCD1D9 */
  border-color: var(--accent);
}

.select-card:active {
  transform: translateY(calc(-0.5 * var(--lift)));
  box-shadow: 0 22px 40px rgba(0, 0, 0, 0.75);
  background: var(--card-bg-muted); /* #8f97a3 */
  border-color: var(--accent);
}

@keyframes slide-from-left {
  from {
    opacity: 0;
    transform: translateX(-40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

@keyframes slide-from-right {
  from {
    opacity: 0;
    transform: translateX(40px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.select-card.slide-left {
  animation: slide-from-left 0.25s ease-out;
}

.select-card.slide-right {
  animation: slide-from-right 0.25s ease-out;
}

/* í˜ì´ì§€ 1 ì¢Œìš° í™”ì‚´í‘œ */
.select-nav-btn {
  padding-inline: 10px;
  white-space: nowrap;
}

/* ë°˜ì‘í˜•: í™”ë©´ ì¢ì„ ë•ŒëŠ” ì¹´ë“œ í­ ì¤„ì´ê¸° */
@media (max-width: 960px) {
  .select-grid {
    gap: 10px;
  }
  .select-card {
    width: 30%;
    min-width: 180px;
    height: 220px;
  }
}

.session-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 6px;
}

.back-btn {
  padding: 4px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(0, 0, 0, 0.35);
  color: #f5f5f5;
  font-size: 0.8rem;
  cursor: pointer;
  transition: background 0.15s ease, transform 0.05s ease;
}

.back-btn:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-1px);
}

/* ë‘ ë²ˆì§¸ í˜ì´ì§€ì—ì„œ ì´ì „ ë²„íŠ¼ë§Œ ë³´ì¼ ë•Œ ì˜ˆì˜ê²Œ */
.session-footer .back-btn {
  background: rgba(255, 255, 255, 0.08);
  padding: 10px 18px;
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  color: #fff;
  font-size: 15px;
  transition: 0.2s;
}

.session-footer .back-btn:hover {
  background: rgba(255, 255, 255, 0.18);
  transform: translateY(-2px);
}

/* ğŸ”¥ ë‘ ë²ˆì§¸ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ ê°•ì œ ë³µêµ¬ */
#page-session .main-layout {
  display: flex !important;
  flex-direction: row !important;
  justify-content: space-between;
  align-items: flex-start;
  gap: 32px;
  width: 100%;
}

/* ğŸ”¥ ì™¼ìª½ íŒ¨ë„ ê¸°ë³¸ í¬ê¸° ë³µì› */
#page-session .panel {
  flex: 1 1 0;
  max-width: none; /* ë˜ëŠ” ì´ ì¤„ì„ ì•„ì˜ˆ ì‚­ì œ */
}

/* ğŸ”¥ ì˜¤ë¥¸ìª½ íŒ¨ë„ í¬ê¸° ë³µì› */
#page-session .control-panel {
  width: 350px;
  flex-shrink: 0;
}

.panel-bottom-right {
  margin-top: 12px; /* ì§ì‚¬ê°í˜•ê³¼ ë²„íŠ¼ ì‚¬ì´ ì—¬ìœ  */
  width: 100%;
  display: flex;
  justify-content: flex-end; /* ì˜¤ë¥¸ìª½ ë ì •ë ¬ */
}

/* ì´ì „ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.panel-bottom-right .back-btn {
  background: rgba(255, 255, 255, 0.12);
  padding: 8px 18px;
  border-radius: 16px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  color: #fff;
  font-size: 15px;
  transition: 0.2s;
}

.panel-bottom-right .back-btn:hover {
  background: rgba(255, 255, 255, 0.22);
}

/* ì¹´ë“œ ì•ˆ ì´ëª¨ì§€ + í…ìŠ¤íŠ¸ í¬ê¸° ì›ë˜ëŒ€ë¡œ */

.select-card .emoji {
  font-size: 2.2rem; /* ğŸ‘‰ ì´ëª¨ì§€ í¬ê²Œ */
}

.select-card .name {
  font-size: 1.3rem;
  font-weight: 600;
}

.select-card .desc {
  font-size: 0.9rem;
  opacity: 0.8;
  margin-top: 4px;
}

    </style>
  </head>

  <body>
    <div class="app">
      <!-- ìƒë‹¨ ë°” -->
      <header class="topbar">
        <div class="top-left">
          <div class="digital-clock">
            ğŸ•’ <span id="digitalClock">00:00:00</span>
          </div>
          <!-- ë¡œê³ /íƒ€ì´í‹€ ì˜ì—­ ì œê±°ë¨ -->
        </div>
      </header>

      <!-- â‘  í…Œë§ˆ ì„ íƒ í˜ì´ì§€ (ì²« í™”ë©´) -->
      <main id="page-select" class="page page-select active">
        <section class="select-hero">
          <div class="team-logo">
            <div class="team-logo-glow"></div>
            <!-- âœ… íˆ¬ëª… ë°°ê²½ìœ¼ë¡œ ë§Œë“  íŒŒì¼ë¡œ ë³€ê²½ -->
            <img
              src="teamlogo.png"
              alt="ìš°ë¦¬ íŒ€ ë¡œê³ "
              class="team-logo-img"
            />
          </div>
        </section>

        <section class="select-grid-wrapper">
          <button class="control-btn select-nav-btn" id="selectPrevBtn">
            â—€
          </button>

          <div class="select-grid" id="selectGrid">
            <button class="select-card" data-key="fire">
              <span class="emoji">ğŸ”¥</span>
              <span class="name">ë¶ˆë©</span>
              <span class="desc">ì¥ì‘ë¶ˆ ì•ì—ì„œ ë©ë•Œë¦¬ê¸°</span>
            </button>

            <button class="select-card" data-key="bubble">
              <span class="emoji">ğŸ«§</span>
              <span class="name">ë²„ë¸”</span>
              <span class="desc">ìœ„ë¡œ ë– ì˜¤ë¥´ëŠ” ê¸°í¬ ë”°ë¼ê°€ê¸°</span>
            </button>

            <button class="select-card" data-key="rain">
              <span class="emoji">ğŸŒ§</span>
              <span class="name">ë¹—ì†Œë¦¬</span>
              <span class="desc">ì°½ë°– ë¹—ì†Œë¦¬ì— ì§‘ì¤‘í•˜ê¸°</span>
            </button>

            <button class="select-card" data-key="snow">
              <span class="emoji">â„ï¸</span>
              <span class="name">ëˆˆ</span>
              <span class="desc">ì²œì²œíˆ ë‚´ë¦¬ëŠ” ëˆˆì†¡ì´</span>
            </button>
            <button class="select-card" data-key="leaf">
              <span class="emoji">ğŸ‚</span>
              <span class="name">ë‚™ì—½</span>
              <span class="desc">ê°€ì„ë°”ëŒì— í©ë‚ ë¦¬ëŠ” ë‚™ì—½</span>
            </button>
            <button class="select-card" data-key="frost">
              <span class="emoji">ğŸ§Š</span>
              <span class="name">ì„±ì—</span>
              <span class="desc">ì„œë¦¬ ë‚€ ì°½ë¬¸ ì‚¬ì´ì˜ ë¹›</span>
            </button>
          </div>

          <button class="control-btn select-nav-btn" id="selectNextBtn">
            â–¶
          </button>
        </section>
      </main>
<script>
var themeInfo = {
  fire: {
    emoji: "ğŸ”¥",
    name: "ë¶ˆë©",
    subtitle: "ì¥ì‘ë¶ˆ ì•ì—ì„œ ì¡°ìš©íˆ í˜¸í¡ë§Œ ëŠê»´ë³´ì„¸ìš”.",
    bg: "radial-gradient(circle at bottom, #ffb347 0%, #ff7a3c 20%, #0d1117 70%)",
    url: "fireAni1.html"
  },

  rain: {
    emoji: "ğŸŒ§",
    name: "ë¹—ì†Œë¦¬",
    subtitle: "ì°½ ë°–ìœ¼ë¡œ ë–¨ì–´ì§€ëŠ” ë¹—ë°©ìš¸ë§Œ ë°”ë¼ë³´ëŠ” ì‹œê°„.",
    bg: "radial-gradient(circle at bottom, #9bb5c9 0%, #4c6d8f 30%, #0d1117 70%)",
    url: "rainAni1.html"
  },
  bubble: {
    emoji: "ğŸ«§",
    name: "ë²„ë¸”",
    subtitle: "ìœ„ë¡œ ë‘¥ë‘¥ ë– ì˜¤ë¥´ëŠ” ê¸°í¬ë¥¼ ë”°ë¼ê°€ ë³´ì„¸ìš”.",
    bg: "radial-gradient(circle at bottom, #d7b1ff 0%, #8a55d6 26%, #0d1117 70%)",
    url: "bubbleAni9.html"
  },
  snow: {
    emoji: "â„ï¸",
    name: "ëˆˆ",
    subtitle: "ì²œì²œíˆ ë‚´ë¦¬ëŠ” ëˆˆì†¡ì´ ì‚¬ì´ë¡œ ìƒê°ì„ í˜ë ¤ë³´ë‚´ì„¸ìš”.",
    bg: "radial-gradient(circle at bottom, #f1f6ff 0%, #96b7f8 22%, #0d1117 75%)",
    url: "snowAni1.html"
  },
  leaf: {
    emoji: "ğŸ‚",
    name: "ë‚™ì—½",
    subtitle: "ê°€ì„ ë°”ëŒì— í©ë‚ ë¦¬ëŠ” ë‚™ì—½ì²˜ëŸ¼ ë‚´ë ¤ë†“ëŠ” ì—°ìŠµ.",
    bg: "radial-gradient(circle at bottom, #ffca85 0%, #b8763a 25%, #0d1117 75%)",
    url: "leafFallAni8.html"
  },
  frost: {
    emoji: "ğŸ§Š",
    name: "ì„±ì—",
    subtitle: "ì„œë¦¬ ë‚€ ì°½ë¬¸ ì‚¬ì´ë¡œ ë“¤ì–´ì˜¤ëŠ” ì°¨ë¶„í•œ ë¹›.",
    bg: "radial-gradient(circle at bottom, #d1edff 0%, #5da8d6 24%, #0d1117 75%)",
    url: "frostAni9.html"
  },
};

var sceneEmoji = document.getElementById("currentThemeEmoji");
var sceneName = document.getElementById("currentThemeName");
var sceneSub = document.getElementById("currentThemeSubtitle");
var sceneCanvas = document.getElementById("sceneCanvas");

/* =========================
   í˜ì´ì§€ ì „í™˜ (ì„ íƒ / ì„¸ì…˜)
   ========================= */
var pageSelect = document.getElementById("page-select");
var pageSession = document.getElementById("page-session");
var backToSelectBtn = document.getElementById("backToSelect");

function showPage(name) {
  if (!pageSelect || !pageSession) return;
  if (name === "select") {
    pageSelect.classList.add("active");
    pageSession.classList.remove("active");
  } else {
    pageSelect.classList.remove("active");
    pageSession.classList.add("active");
  }
}

if (backToSelectBtn) {
  backToSelectBtn.addEventListener("click", function () {
    showPage("select");
  });
}

/* =========================
   í…Œë§ˆ ì ìš© í•¨ìˆ˜
   ========================= */
// function applyThemeByKey(key) {
//   var t = themeInfo[key];
//   if (!t || !sceneCanvas || !sceneEmoji || !sceneName || !sceneSub) return;

//   sceneEmoji.textContent = t.emoji;
//   sceneName.textContent = t.name;
//   sceneSub.textContent = t.subtitle;
//   sceneCanvas.style.background = t.bg;

//   var chips = document.querySelectorAll(".theme-chip");
//   for (var i = 0; i < chips.length; i++) {
//     var chip = chips[i];
//     chip.classList.toggle("active", chip.getAttribute("data-key") === key);
//   }

//   var cards = document.querySelectorAll(".select-card");
//   for (var j = 0; j < cards.length; j++) {
//     var card = cards[j];
//     card.classList.toggle("active", card.getAttribute("data-key") === key);
//   }
// }

/* =========================
   í˜ì´ì§€ 1 : ì„ íƒ ê·¸ë¦¬ë“œ (í° ì¹´ë“œ 3ê°œì”©)
   ========================= */

const MAIN_STATE_KEY = "detox-main-state";
var SELECT_ORDER = ["fire", "bubble", "rain", "snow", "leaf", "frost"];
var SELECT_PAGE_SIZE = 3;
const SELECT_STEP = 1;
var selectStart = 0;

// â˜… ë©”ì¸ í™”ë©´ ìƒíƒœ ë³µì›
function restoreMainState() {
  try {
    const raw = localStorage.getItem(MAIN_STATE_KEY);
    if (!raw) return;

    const state = JSON.parse(raw);

    // 1) ì¹´ë“œ ìŠ¬ë¼ì´ë” ìœ„ì¹˜
    if (typeof state.selectStart === "number" && TOTAL_THEMES > 0) {
      selectStart = state.selectStart % TOTAL_THEMES;
      if (selectStart < 0) selectStart += TOTAL_THEMES;
    }

    // 2) (ì„ íƒ) ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ë³µì›
    if (typeof state.scrollY === "number") {
      // DOM ì¤€ë¹„ í›„ ì‚´ì§ ëŠ¦ê²Œ ìŠ¤í¬ë¡¤ ì´ë™
      setTimeout(function () {
        window.scrollTo(0, state.scrollY);
      }, 0);
    }

    // í•„ìš”í•˜ë©´ ì—¬ê¸°ì„œ timer ê°’, ë°°ê²½ìŒ ì„ íƒ ë“±ë„ ë³µì› ê°€ëŠ¥
  } catch (e) {
    // íŒŒì‹± ì‹¤íŒ¨í•´ë„ ê·¸ëƒ¥ ë¬´ì‹œ
  }
}

// â˜… ë©”ì¸ í™”ë©´ ìƒíƒœ ì €ì¥
function saveMainState() {
  try {
    const state = {
      selectStart: selectStart,
      scrollY: window.scrollY || 0,
      // timerMin: timerMinInput ? timerMinInput.value : "",
      // timerSec: timerSecInput ? timerSecInput.value : "",
      // ë‚˜ì¤‘ì— ë” ì €ì¥í•˜ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸° ì¶”ê°€
    };
    localStorage.setItem(MAIN_STATE_KEY, JSON.stringify(state));
  } catch (e) {
    // ì €ì¥ ì‹¤íŒ¨í•´ë„ í¬ê²Œ ë¬¸ì œ ì—†ìŒ
  }
}

// í˜ì´ì§€ ë– ë‚˜ê¸° ì§ì „ì— í•œ ë²ˆ ë” ìƒíƒœ ì €ì¥
window.addEventListener("beforeunload", saveMainState);


// â­ ì „ì²´ í…Œë§ˆ ê°œìˆ˜ (ì›í˜• ìŠ¬ë¼ì´ë”ìš©)
var TOTAL_THEMES = SELECT_ORDER.length;

var selectPrevBtn = document.getElementById("selectPrevBtn");
var selectNextBtn = document.getElementById("selectNextBtn");
var selectCards = document.querySelectorAll(".select-card");

/* ğŸ‘‰ ì¶”ê°€: ì¢Œìš° ì´ë™ ë°©í–¥ ì €ì¥ (-1 = ì™¼ìª½ ë²„íŠ¼, 1 = ì˜¤ë¥¸ìª½ ë²„íŠ¼, 0 = ì´ˆê¸°/ì• ë‹ˆë©”ì´ì…˜ ì—†ìŒ) */
var selectDirection = 0;

function updateSelectGrid() {
  if (!selectCards.length) return;

  for (var i = 0; i < selectCards.length; i++) {
    var card = selectCards[i];

    // ì´ ì¹´ë“œì˜ key (fire  / rain / bubble / snow / leaf / frost)
    var key = card.getAttribute("data-key");
    var idx = SELECT_ORDER.indexOf(key);

    // í˜¹ì‹œ ì •ì˜ ì•ˆ ëœ ì¹´ë“œë©´ ìˆ¨ê¹€
    if (idx === -1) {
      card.style.display = "none";
      continue;
    }

    // SELECT_ORDER ìˆœì„œë¥¼ ê¸°ì¤€ìœ¼ë¡œ offset ê³„ì‚°
    var offset = (idx - selectStart + TOTAL_THEMES) % TOTAL_THEMES;

    // 3ì¥ ë³´ì—¬ì£¼ê¸°
    var visible = offset >= 0 && offset < SELECT_PAGE_SIZE;

    if (visible) {
      card.style.display = "flex";

      // â˜… ì—¬ê¸°ì„œ flex ì •ë ¬ ìˆœì„œë¥¼ offset(0,1,2)ë¡œ ê°•ì œ
      card.style.order = offset;

      // ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
      card.classList.remove("slide-left", "slide-right");

      if (selectDirection !== 0) {
        // ê°•ì œ ë¦¬í”Œë¡œìš°ë¡œ ì• ë‹ˆë©”ì´ì…˜ ë¦¬ì…‹
        void card.offsetWidth;

        if (selectDirection === 1) {
          card.classList.add("slide-right");
        } else if (selectDirection === -1) {
          card.classList.add("slide-left");
        }
      }
    } else {
      card.style.display = "none";
      // ì•ˆ ë³´ì´ëŠ” ì¹´ë“œëŠ” order í¬ê²Œ ì£¼ê±°ë‚˜ ë¹„ì›Œë„ ìƒê´€ ì—†ìŒ
      card.style.order = 99;
    }
  }

  // ì›í˜• ìŠ¬ë¼ì´ë”ë‹ˆê¹Œ ë²„íŠ¼ì€ í•­ìƒ í™œì„±í™”
  if (selectPrevBtn) selectPrevBtn.disabled = false;
  if (selectNextBtn) selectNextBtn.disabled = false;
}

// â—€ ì™¼ìª½: 1ì¹¸ ë’¤ë¡œ (ì›í˜•)
if (selectPrevBtn) {
  selectPrevBtn.addEventListener("click", function () {
    selectDirection = -1; // â† ì™¼ìª½ìœ¼ë¡œ ì´ë™
    selectStart = (selectStart - SELECT_STEP + TOTAL_THEMES) % TOTAL_THEMES;
    updateSelectGrid();
  });
}

// â–¶ ì˜¤ë¥¸ìª½: 1ì¹¸ ì•ìœ¼ë¡œ (ì›í˜•)
if (selectNextBtn) {
  selectNextBtn.addEventListener("click", function () {
    selectDirection = 1; // â†’ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì´ë™
    selectStart = (selectStart + SELECT_STEP) % TOTAL_THEMES;
    updateSelectGrid();
  });
}

for (var k = 0; k < selectCards.length; k++) {
  (function (card) {
    card.addEventListener("click", function () {
      var key = card.getAttribute("data-key");
      var info = themeInfo[key];

      saveMainState(); // ì„ íƒ ì§ì „ì— ìƒíƒœ ì €ì¥

      if(info && info.url && info.url !== "") {
        window.location.href = info.url;
        return;
      }
      applyThemeByKey(key);
      showPage("session");
    });
  })(selectCards[k]);
}

/* =========================
   í˜ì´ì§€ 2 : í•˜ë‹¨ í…Œë§ˆ ìŠ¤íŠ¸ë¦½ (ì‘ì€ ì¹©ë“¤)
   ========================= */
var THEME_ORDER = ["fire", "rain", "bubble", "snow", "leaf", "frost"];
var PAGE_SIZE = 3;
var themePageStart = 0;

var prevThemeBtn = document.getElementById("prevThemeBtn");
var nextThemeBtn = document.getElementById("nextThemeBtn");

function updateThemeStrip() {
  var chips = document.querySelectorAll(".theme-chip");
  if (!chips.length) return;

  for (var i = 0; i < chips.length; i++) {
    var chip = chips[i];
    var visible = i >= themePageStart && i < themePageStart + PAGE_SIZE;
    chip.style.display = visible ? "flex" : "none";
  }

  if (prevThemeBtn) {
    prevThemeBtn.disabled = themePageStart === 0;
  }
  if (nextThemeBtn) {
    nextThemeBtn.disabled = themePageStart + PAGE_SIZE >= THEME_ORDER.length;
  }
}

if (prevThemeBtn) {
  prevThemeBtn.addEventListener("click", function () {
    if (themePageStart > 0) {
      themePageStart -= PAGE_SIZE;
      if (themePageStart < 0) themePageStart = 0;
      updateThemeStrip();
    }
  });
}

if (nextThemeBtn) {
  nextThemeBtn.addEventListener("click", function () {
    if (themePageStart + PAGE_SIZE < THEME_ORDER.length) {
      themePageStart += PAGE_SIZE;
      updateThemeStrip();
    }
  });
}

var themeChips = document.querySelectorAll(".theme-chip");
for (var c = 0; c < themeChips.length; c++) {
  (function (btn) {
    btn.addEventListener("click", function () {
      applyThemeByKey(btn.getAttribute("data-key"));
    });
  })(themeChips[c]);
}

/* =========================
   íƒ€ì´ë¨¸ ë¡œì§
   ========================= */
/* =========================
   íƒ€ì´ë¨¸ ë¡œì§
   ========================= */
var timerMinInput = document.getElementById("timerMin");
var timerSecInput = document.getElementById("timerSec");
var timerDisplay = document.getElementById("timerDisplay");

var timerStartBtn = document.getElementById("timerStartBtn");
var timerPauseBtn = document.getElementById("timerPauseBtn");
var timerResetBtn = document.getElementById("timerResetBtn");

var timerInterval = null;
var timerRemainingMs = 0;
var timerRunning = false;

var startBtnIcon = null;
var startBtnLabel = null;
if (timerStartBtn) {
  startBtnIcon = timerStartBtn.querySelector("i");
  startBtnLabel = timerStartBtn.querySelector("span");
}

/* ğŸ”’ ì—¬ê¸°ë¶€í„° ìƒˆë¡œ ì¶”ê°€: ìŒìˆ˜ ì…ë ¥ ë°©ì§€ */
function blockNegative(inputEl) {
  if (!inputEl) return;

  // í‚¤ë³´ë“œë¡œ '-'ë‚˜ 'e' ì…ë ¥ ìì²´ ë§‰ê¸° (ìŒìˆ˜ / ì§€ìˆ˜í‘œê¸° ë°©ì§€)
  inputEl.addEventListener("keydown", function (e) {
    if (e.key === "-" || e.key === "e") {
      e.preventDefault();
    }
  });

  // ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ 0 ë¯¸ë§Œì´ë©´ ê°•ì œë¡œ 0ìœ¼ë¡œ ê³ ì •
  inputEl.addEventListener("input", function () {
    var n = parseInt(inputEl.value || "0", 10);

    if (isNaN(n) || n < 0) {
      n = 0;
    }

    inputEl.value = n;
  });
}

// íƒ€ì´ë¨¸ ì…ë ¥ì¹¸ ë‘ ê°œì— ì ìš©
blockNegative(timerMinInput);
blockNegative(timerSecInput);
/* ğŸ”’ ì—¬ê¸°ê¹Œì§€ ì¶”ê°€ */

/* ì›ë˜ ìˆë˜ í•¨ìˆ˜ ê·¸ëŒ€ë¡œ ì•„ë˜ ìœ ì§€ */
function setStartBtnState(isRunning) {
  if (!startBtnIcon) return;
  if (isRunning) {
    startBtnIcon.classList.remove("fa-play");
    startBtnIcon.classList.add("fa-pause");
    if (startBtnLabel) startBtnLabel.textContent = "ì§„í–‰ ì¤‘";
  } else {
    startBtnIcon.classList.remove("fa-pause");
    startBtnIcon.classList.add("fa-play");
    if (startBtnLabel) startBtnLabel.textContent = "ì‹œì‘";
  }
}

var detoxSessionActive = false;

function formatTimer(ms) {
  var totalSeconds = Math.max(0, Math.floor(ms / 1000));
  var m = String(Math.floor(totalSeconds / 60)).padStart(2, "0");
  var s = String(totalSeconds % 60).padStart(2, "0");
  return m + ":" + s;
}

function updateTimerDisplay() {
  if (timerDisplay) {
    timerDisplay.textContent = formatTimer(timerRemainingMs);
  }
}

function readTimerFromInput() {
  if (!timerMinInput || !timerSecInput) return 0;
  var m = parseInt(timerMinInput.value || "0", 10);
  var s = parseInt(timerSecInput.value || "0", 10);
  var total = (m * 60 + s) * 1000;
  return isNaN(total) ? 0 : total;
}

function startTimer() {
  if (timerRunning) return;

  if (timerRemainingMs <= 0) {
    timerRemainingMs = readTimerFromInput();
    if (timerRemainingMs <= 0) {
      alert("ë¶„/ì´ˆë¥¼ ì…ë ¥í•œ ë’¤ ì‹œì‘ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.");
      return;
    }
  }

  timerRunning = true;
  setStartBtnState(true);

  var startTime = Date.now();
  var startRemaining = timerRemainingMs;

  if (timerInterval) clearInterval(timerInterval);
  timerInterval = setInterval(function () {
    var elapsed = Date.now() - startTime;
    timerRemainingMs = startRemaining - elapsed;

    if (timerRemainingMs <= 0) {
      timerRemainingMs = 0;
      updateTimerDisplay();
      clearInterval(timerInterval);
      timerRunning = false;
      onTimerFinished();
    } else {
      updateTimerDisplay();
    }
  }, 200);

  updateTimerDisplay();
}

function pauseTimer() {
  if (!timerRunning) return;
  timerRunning = false;
  clearInterval(timerInterval);
  setStartBtnState(false);
}

function resetTimer() {
  timerRunning = false;
  clearInterval(timerInterval);
  timerRemainingMs = 0;
  updateTimerDisplay();
  detoxSessionActive = false;
  updateLockStatus("ìƒíƒœ: ëŒ€ê¸° ì¤‘");
  setStartBtnState(false);
}

if (timerStartBtn) {
  timerStartBtn.addEventListener("click", function () {
    detoxSessionActive = false;
    updateLockStatus("ìƒíƒœ: ëŒ€ê¸° ì¤‘");
    startTimer();
  });
}
if (timerPauseBtn) {
  timerPauseBtn.addEventListener("click", pauseTimer);
}
if (timerResetBtn) {
  timerResetBtn.addEventListener("click", resetTimer);
}

updateTimerDisplay();

/* =========================
   ì´ˆê¸° ìƒíƒœ ì„¸íŒ…
   ========================= */
selectDirection = 0; // ì´ˆê¸°ì—” ì• ë‹ˆë©”ì´ì…˜ ì—†ì´ ë°°ì¹˜

restoreMainState();

updateThemeStrip();
updateSelectGrid();

showPage("select");
setStartBtnState(false);

/* =========================
   ë°°ê²½ ì†Œë¦¬ ë¡œì§ (ì˜µì…˜)
   ========================= */
var bgSound = document.getElementById("bgSound");
var soundButtons = document.querySelectorAll(".sound-btn");

var soundFiles = {
  none: "",
  calm: "sounds/calm.mp3",
  bright: "sounds/bright.mp3",
};

function setBackgroundSound(key) {
  if (!bgSound) return;

  for (var i = 0; i < soundButtons.length; i++) {
    var btn = soundButtons[i];
    btn.classList.toggle("active", btn.getAttribute("data-sound") === key);
  }

  var src = soundFiles[key] || "";
  if (!src) {
    bgSound.pause();
    bgSound.removeAttribute("src");
    bgSound.load();
    return;
  }

  if (bgSound.getAttribute("data-current") === key) return;

  bgSound.setAttribute("data-current", key);
  bgSound.src = src;
  bgSound.currentTime = 0;
  bgSound.play()["catch"](function () {});
}

for (var i2 = 0; i2 < soundButtons.length; i2++) {
  (function (btn) {
    btn.addEventListener("click", function () {
      setBackgroundSound(btn.getAttribute("data-sound"));
    });
  })(soundButtons[i2]);
}

setBackgroundSound("none");

// ë¡œê³  ë°‘ ë²„ë¸” ë²„íŠ¼ 3ê°œ í´ë¦­ â†’ í…Œë§ˆ ì ìš© + ì„¸ì…˜ í˜ì´ì§€ë¡œ ì´ë™
document.querySelectorAll(".bubble-btn").forEach((btn) => {
  btn.addEventListener("click", () => {
    const key = btn.dataset.key; // fire / water / leaf
    applyThemeByKey(key);
    showPage("session");
  });
});

// =========================
// ë””ì§€í„¸ ì‹œê³„ (í˜„ì¬ ì‹œê°„ í‘œì‹œ)
// =========================
(function () {
  const clockEl = document.getElementById("digitalClock");
  if (!clockEl) return;  // í˜¹ì‹œ ìš”ì†Œê°€ ì—†ìœ¼ë©´ ê·¸ëƒ¥ ì¢…ë£Œ

  function pad2(n) {
    return String(n).padStart(2, "0");
  }

  function updateClock() {
    const now = new Date();
    const hh = pad2(now.getHours());      // 0~23ì‹œ (24ì‹œê°„ì œ)
    const mm = pad2(now.getMinutes());
    const ss = pad2(now.getSeconds());
    clockEl.textContent = `${hh}:${mm}:${ss}`;
  }

  updateClock();                // í˜ì´ì§€ ì¼œì§€ìë§ˆì í•œ ë²ˆ í‘œì‹œ
  setInterval(updateClock, 1000); // 1ì´ˆë§ˆë‹¤ ê°±ì‹ 
})();
    </script>
  </body>
</html>
